<Page
   x:Class="Retouch_Photo2.MainPage"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
   xmlns:elements="using:Retouch_Photo2.Elements"
   
   xmlns:apiContractNotPresent5="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractNotPresent(Windows.Foundation.UniversalApiContract,5)"
   xmlns:apiContractPresent5="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract,5)"
  
   xmlns:developerTools="using:Microsoft.Toolkit.Uwp.DeveloperTools"
   xmlns:animations="using:Microsoft.Toolkit.Uwp.UI.Animations" 
   xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    
   xmlns:viewModels="using:Retouch_Photo2.ViewModels"
   xmlns:elementsMainpages="using:Retouch_Photo2.Elements.MainPages"
   mc:Ignorable="d"

   Background="{ThemeResource AppBackground}"
   >


    <Page.Resources>

        <!--Extensions-->
        <elements:ApplicationViewTitleBarBackgroundExtension x:Key="AVTBBE" TitleBarColor="{ThemeResource AppForeground}"/>
     
        <!--DataTemplate-->
        <DataTemplate x:Name="DataTemplate" x:DataType="viewModels:Photo">
            <Grid >
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="2"/>
                    <RowDefinition Height="20"/>
                    <RowDefinition Height="10"/>
                </Grid.RowDefinitions>

                <controls:DropShadowPanel 
                    HorizontalAlignment="Center"
                    BlurRadius="20" 
                    OffsetX="8" 
                    OffsetY="8" 
                    ShadowOpacity="0.8" 
                    Color="{ThemeResource AppStrokeColor}">
                    <Grid MaxWidth="200" Margin="6"                      
                          BorderThickness="1"                     
                          apiContractNotPresent5:BorderBrush="{ThemeResource SystemControlBackgroundBaseLowBrush}"                     
                          apiContractPresent5:BorderBrush="{ThemeResource SystemControlBackgroundListMediumRevealBorderBrush}"                          
                          Background="{ThemeResource AppForeground}"
                          
                          PointerEntered="{x:Bind Entered}"         
                          PointerExited="{x:Bind Exited}"            
                          PointerPressed="{x:Bind Entered}"           
                          PointerReleased="{x:Bind Exited}"            
                          PointerCanceled="{x:Bind Exited}"            
                          PointerCaptureLost="{x:Bind Exited}">
                      
                        <!--Image-->
                        <controls:ImageEx Source="{x:Bind Uri,Mode=OneWay}" MinWidth="60" MinHeight="60" IsCacheEnabled="True" />
                      
                        <!--Draken-->
                        <Rectangle Opacity="0.4" Fill="{ThemeResource AppStroke}" Visibility="{x:Bind DarkenVisibility,Mode=OneWay}"/>
                 
                    </Grid>
                </controls:DropShadowPanel>

                <TextBlock Grid.Row="2" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" Text="{x:Bind Name,Mode=OneWay}" Foreground="{ThemeResource AppBarSeparatorForegroundThemeBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" />

            </Grid>
        </DataTemplate>

    </Page.Resources>


    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--Developer-->
        <developerTools:AlignmentGrid Grid.Row="1" Opacity="0.1" HorizontalStep="20" VerticalStep="20" LineBrush="Gray"/>

        
        <!--Head-->
        <Grid HorizontalAlignment="Stretch" BorderThickness="0,0,0,1" BorderBrush="{ThemeResource AppStroke}" Background="{ThemeResource AppForeground}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" MinWidth="50" MaxWidth="80"/>
                <ColumnDefinition Width="6*"/>
                <ColumnDefinition Width="1*" MinWidth="50" MaxWidth="80"/>
            </Grid.ColumnDefinitions>

            <Button x:Name="RefreshButton" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="1" BorderBrush="Transparent" Background="Transparent">
                <Button.Transitions>
                    <TransitionCollection>
                        <EntranceThemeTransition FromHorizontalOffset="25" FromVerticalOffset="0"/>
                    </TransitionCollection>
                </Button.Transitions>
                <FontIcon FontSize="20" Glyph="&#xE117;" FontFamily="{ThemeResource SymbolThemeFontFamily}" />
            </Button>

            <TextBlock Grid.Column="1" HorizontalAlignment="Center" Style="{StaticResource SubheaderTextBlockStyle}">
                <TextBlock.Transitions>
                    <TransitionCollection>
                        <EntranceThemeTransition FromHorizontalOffset="50" FromVerticalOffset="0"/>
                    </TransitionCollection>
                </TextBlock.Transitions>
                Retouh Photo2
            </TextBlock>

            <Button x:Name="SettingButton" Grid.Column="2" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="1" BorderBrush="Transparent" Background="Transparent">
                <Button.Transitions>
                    <TransitionCollection>
                        <EntranceThemeTransition FromHorizontalOffset="25" FromVerticalOffset="0"/>
                    </TransitionCollection>
                </Button.Transitions>
                <FontIcon FontSize="22" Glyph="&#xE115;" FontFamily="Segoe UI Symbol" />
            </Button>

        </Grid>

        
        <!--Body-->
        <StackPanel x:Name="InitialControl" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center">
            <StackPanel.ChildrenTransitions>
                <TransitionCollection>
                    <EntranceThemeTransition IsStaggeringEnabled="True"/>
                </TransitionCollection>
            </StackPanel.ChildrenTransitions>

            <StackPanel.Children>

                <TextBlock HorizontalAlignment="Center" Foreground="{ThemeResource AppText}">
                    No projects? You could...
                </TextBlock>
                <ContentControl Height="6"/>

                <Button x:Name="AddButton" Style="{StaticResource AppTagAccentLineCircleButton}">
                    <Button.Tag>
                        <FontIcon Glyph="&#xE109;" FontSize="22" FontFamily="{StaticResource SymbolThemeFontFamily}"/>
                    </Button.Tag>                
                    Add New Project
                </Button>
                
                <Rectangle Height="1" Fill="{ThemeResource AppBorderBrush}" HorizontalAlignment="Stretch"/>

                <Button x:Name="PhotoButton" Style="{StaticResource AppTagAccentLineCircleButton}">
                    <Button.Tag>
                        <FontIcon Glyph="&#xEB9F;" FontSize="22" FontFamily="{StaticResource SymbolThemeFontFamily}"/>
                    </Button.Tag>                
                    New Project From Pictures
                </Button>
                
                <Button x:Name="DestopButton" Style="{StaticResource AppTagAccentLineCircleButton}">
                    <Button.Tag>
                        <FontIcon Glyph="&#xEC4E;" FontSize="22" FontFamily="{StaticResource SymbolThemeFontFamily}"/>
                    </Button.Tag>                
                    New Project From Destop
                </Button>
                
            </StackPanel.Children>

        </StackPanel>
        
        <GridView x:Name="GridView"        
                    Grid.Row="1"
                    AllowDrop="True"              
                    CanReorderItems="True"            
                    CanDragItems="True"             
                    CanDrag="True"                        
                    ItemsSource="{x:Bind PhotoFileList}"     
                    IsItemClickEnabled="True"                                         
                    ItemTemplate="{StaticResource DataTemplate}"  
                    ItemContainerStyle="{StaticResource AppMainPageItemContainerStyle}"      
                    Style="{StaticResource AppMainPageGridViewStyle}"                    
                    animations:ReorderGridAnimation.Duration="300"
                    />
        
        
        <!--Foot-->
        <elements:RadiusAnimaPanel x:Name="RadiusAnimaPanel" Grid.Row="1" ShadowColor="{ThemeResource AppStrokeColor}"/>

        
        <!--Loading-->
        <elements:LoadingControl x:Name="LoadingControl" Grid.RowSpan="3"/>

        <!--Dialog-->
        <elementsMainpages:AddDialog x:Name="AddDialog" Grid.Row="1" />
        <elementsMainpages:AddDialog x:Name="FolderDialog" Grid.Row="1"/>

    </Grid>
</Page>