<UserControl
    x:Class="Retouch_Photo2.TestApp.Controls.LayersControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:layers="using:Retouch_Photo2.Layers"
    mc:Ignorable="d"
    d:DesignHeight="800"
    d:DesignWidth="200">

    <UserControl.Resources>

        <!--DataTemplate-->
        <DataTemplate x:Key="DataTemplate" x:DataType="layers:Layer">
            <layers:Button 
                
                Icon="{x:Bind Icon,Mode=OneWay}"
                Text="{x:Bind Name,Mode=OneWay}"
                IsChecked="{x:Bind IsChecked,Mode=OneWay}"
                IsVisual="{x:Bind IsVisual,Mode=OneWay}"
                
                RootGridTapped="{x:Bind RootGrid_Tapped}"
                IsVisualButtonTapped="{x:Bind IsVisualButton_Tapped}"
                CheckBoxTapped="{x:Bind CheckBox_Tapped}"
                />
        </DataTemplate>

        <!--Style-->
        <Style x:Key="ListViewStyle" TargetType="ListView">

            <Setter Property="AllowDrop" Value="True"/>
            <Setter Property="CanDrag" Value="True"/>
            <Setter Property="CanDragItems" Value="True"/>
            <Setter Property="CanReorderItems" Value="True"/>
            <Setter Property="ReorderMode" Value="Enabled"/>
            <Setter Property="SelectionMode" Value="None"/>

            <Setter Property="IsTabStop" Value="False"/>
            <Setter Property="TabNavigation" Value="Once"/>
            <Setter Property="IsSwipeEnabled" Value="True"/>

            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="VerticalAlignment" Value="Stretch"/>
            <Setter Property="MinHeight" Value="90"/>
            <Setter Property="IsSwipeEnabled" Value="True"/>
            <Setter Property="IsSwipeEnabled" Value="True"/>

            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden"/>
            <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled"/>
            <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False"/>
            <Setter Property="ScrollViewer.VerticalScrollMode" Value="Enabled"/>
            <Setter Property="ScrollViewer.IsVerticalRailEnabled" Value="True"/>
            <Setter Property="ScrollViewer.ZoomMode" Value="Disabled"/>

            <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
            <Setter Property="ScrollViewer.BringIntoViewOnFocusChange" Value="True"/>
            <Setter Property="ItemContainerTransitions">
                <Setter.Value>
                    <TransitionCollection>
                        <!--            
                        <ReorderThemeTransition />

                        <AddDeleteThemeTransition />
                        <ContentThemeTransition />
                        <EntranceThemeTransition IsStaggeringEnabled="False" />
                       -->
                    </TransitionCollection>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <ItemsStackPanel ItemsUpdatingScrollMode="KeepLastItemInView" VerticalAlignment="Bottom"/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--ItemContainerStyle-->
        <Style x:Key="ItemContainerStyle" TargetType="ListViewItem">
            <Setter Property="MinWidth" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="VerticalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        </Style>

    </UserControl.Resources>


    <ListView x:Name="ListView"
                               
               ItemsSource="{x:Bind ViewModel.Layers}"
               ItemTemplate="{StaticResource DataTemplate}"
                                           
               Style="{StaticResource ListViewStyle}"
               ItemContainerStyle="{StaticResource ItemContainerStyle}"
               >

        <ListView.Header>
            <Border Height="42">
                <Button x:Name="AddButton" BorderThickness="0" BorderBrush="Transparent" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <FontIcon Glyph="&#xE109;" FontFamily="{ThemeResource SymbolThemeFontFamily}"/>
                </Button>
            </Border>
        </ListView.Header>
    </ListView>
</UserControl>
