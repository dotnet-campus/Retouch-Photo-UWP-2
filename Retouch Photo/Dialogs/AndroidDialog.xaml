<UserControl
    x:Class="Retouch_Photo.Dialogs.AndroidDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:animations="using:Microsoft.Toolkit.Uwp.UI.Animations"
    xmlns:extensions="using:Microsoft.Toolkit.Uwp.UI.Extensions"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    mc:Ignorable="d"
    d:DesignHeight="400"
    d:DesignWidth="600">


    <UserControl.Resources>

        <Style x:Key="AppDialogButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#33888888" />
            <Setter Property="Foreground" Value="{ThemeResource ButtonForeground}" />
            <Setter Property="BorderBrush" Value="{ThemeResource SystemControlBackgroundBaseLowBrush}" />
            <Setter Property="BorderThickness" Value="{ThemeResource ContentDialogBorderWidth}" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Stretch" />
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
            <Setter Property="FontWeight" Value="Medium" />
            <Setter Property="Height" Value="36" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid x:Name="RootGrid" 
                                      CornerRadius="18"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                                      Background="{TemplateBinding Background}">

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal">

                                        <Storyboard>
                                            <PointerUpThemeAnimation Storyboard.TargetName="RootGrid" />
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="PointerOver">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledBaseLowBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="Pressed">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledBaseMediumLowBrush}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>

                                    <VisualState x:Name="Disabled">

                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonBackgroundDisabled}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="BorderBrush">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonBorderBrushDisabled}" />
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonForegroundDisabled}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>

                            </VisualStateManager.VisualStateGroups>
                            <ContentPresenter x:Name="ContentPresenter"
                            Content="{TemplateBinding Content}"
                            ContentTransitions="{TemplateBinding ContentTransitions}"
                            ContentTemplate="{TemplateBinding ContentTemplate}"
                            Padding="{TemplateBinding Padding}"
                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                            AutomationProperties.AccessibilityView="Raw" />

                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>
    
    
    <Grid x:Name="RootGrid" Visibility="Collapsed" >

        <!--VisualState-->
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>

                <!--Phone-->
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>

                        <Setter Target="BackgroundRectangle.RadiusX" Value="12"/>
                        <Setter Target="BackgroundRectangle.RadiusY" Value="12"/>
                        <Setter Target="GridLength.Width" Value="0"/>

                    </VisualState.Setters>
                </VisualState>

                <!--Pad-->
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="600"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>

                        <Setter Target="BackgroundRectangle.RadiusX" Value="4"/>
                        <Setter Target="BackgroundRectangle.RadiusY" Value="4"/>
                        <Setter Target="GridLength.Width" Value="*"/>

                    </VisualState.Setters>
                </VisualState>

                <!--PC-->
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="900"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>

                        <Setter Target="BackgroundRectangle.RadiusX" Value="4"/>
                        <Setter Target="BackgroundRectangle.RadiusY" Value="4"/>
                        <Setter Target="GridLength.Width" Value="*"/>

                    </VisualState.Setters>
                </VisualState>

            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        
        <!--Shadow-->
        <Rectangle Fill="#22000000" IsHitTestVisible="False"/>

        
        <Grid x:Name="BackgroundGrid"  Margin="12" HorizontalAlignment="Stretch" VerticalAlignment="Bottom">

            <!--Visibility:Show-->
            <animations:Implicit.ShowAnimations>
                <animations:TranslationAnimation Duration="0:0:0.1" From="0,100,0" To="0,0,0"/>
                <animations:OpacityAnimation Duration="0:0:0.1" From="0.0" To="1.0"/>
            </animations:Implicit.ShowAnimations>
            <!--Visibility:Hide-->
            <animations:Implicit.HideAnimations>
                <animations:TranslationAnimation Duration="0:0:0.1" From="0,0,0" To="0,100,0"/>
                <animations:OpacityAnimation Duration="0:0:0.1" From="1.0" To="0.0"/>
            </animations:Implicit.HideAnimations>

            
            <!--Shadow-->
            <controls:DropShadowPanel HorizontalAlignment="Center" VerticalAlignment="Center"
                                      OffsetY="3" Color="{ThemeResource AppBorderBrushColor}">
                <Rectangle x:Name="BackgroundRectangle"   
                           Height="{Binding ElementName=ContentGrid, Path=(extensions:FrameworkElementExtensions.ActualHeight)}"
                           Width="{Binding ElementName=ContentGrid, Path=(extensions:FrameworkElementExtensions.ActualWidth)}"
                           StrokeThickness="1" Stroke="{ThemeResource AppBorderBrush}"
                           Fill="{ThemeResource AppBackground}"/>
            </controls:DropShadowPanel>
            <!--Content-->
            <Grid  x:Name="ContentGrid" MaxWidth="700" Padding="12"  Background="Transparent"
                   extensions:FrameworkElementExtensions.EnableActualSizeBinding="True">

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" MinHeight="22" />
                    <RowDefinition Height="12" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="12" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--Tittle-->
                <TextBlock x:Name="TittlePresenter" FontWeight="Medium"  TextWrapping="Wrap"/>
                <!--Body-->
                <ContentControl x:Name="ContentPresenter" Grid.Row="2" Margin="0" FontWeight="Medium" MinHeight="40" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Foreground="{ThemeResource SystemControlBackgroundBaseMediumBrush}"/>

                <Grid Grid.Row="4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition  x:Name="GridLength"/>
                        <ColumnDefinition Width="0.5*" />
                        <ColumnDefinition Width="12" />
                        <ColumnDefinition Width="0.5*" />
                    </Grid.ColumnDefinitions>
                    <Button x:Name="PrimaryButton" Grid.Column="1" Content="确定" Foreground="{ThemeResource InkToolbarAccentColorThemeBrush}" Style="{StaticResource AppDialogButtonStyle}" />
                    <Button x:Name="CloseButton" Grid.Column="3" Content="取消" Foreground="Red" Style="{StaticResource AppDialogButtonStyle}" Tapped="CloseButton_Tapped"/>
                </Grid>

            </Grid>

        </Grid>
    </Grid>
</UserControl>
